version: "3.7"
networks:
  default:
    internal: true
  gateway:
    external: true
services:
  homarus:
    restart: ${RESTART_POLICY}
    image: ${REPOSITORY}/homarus:${TAG}
    deploy:
      resources:
          limits:
            memory: ${HOMARUS_MEMORY_LIMIT:-1G}
          reservations:
            memory: 512M
  houdini:
    restart: ${RESTART_POLICY}
    image: ${REPOSITORY}/houdini:${TAG}
    deploy:
      resources:
          limits:
            memory: ${HOUDINI_MEMORY_LIMIT:-1G}
          reservations:
            memory: 512M
  hypercube:
    restart: ${RESTART_POLICY}
    image: ${REPOSITORY}/hypercube:${TAG}
    deploy:
      resources:
          limits:
            memory: ${HYPERCUBE_MEMORY_LIMIT:-512M}
          reservations:
            memory: 256M
  milliner:
    restart: ${RESTART_POLICY}
    image: ${REPOSITORY}/milliner:${TAG}
    environment:
      MILLINER_FEDORA6: ${FEDORA_6}
    networks:
      default:
      gateway:
    deploy:
      resources:
          limits:
            memory: ${MILLINER_MEMORY_LIMIT:-1G}
          reservations:
            memory: 512M
